<!DOCTYPE html>
<html>

<head>
  <link rel="shortcut icon" href="./assets/images/icon.png" type="image/png" />
  <title>N3X Games</title>

  <link rel="stylesheet" href="./css/master.css" />
  <link rel="stylesheet" href="./css/nav.css" />

  <script src="/uv/uv.bundle.js" charset="UTF-8"></script>
  <script src="/uv/uv.config.js"></script>
  <script src="./js/preload.js"></script>

  <meta name="viewport" content="width=device-width, initial-scale=1" />
</head>

<body theme="main">
  <canvas id="constellationCanvas"></canvas>

  <!-- Sidebar Toggle -->
  <input type="checkbox" id="navToggle" class="nav-toggle" />

  <nav class="sidebar">
    <label for="navToggle" class="sidebar-edge" aria-label="Toggle sidebar"></label>

    <div class="logo">
      <a href="/index.html">
        <img src="./assets/images/icon.png" class="logo-img" draggable="false">
      </a>
    </div>

    <p id="time"></p>

    <div class="navitems">
      <div class="navitem">
        <a href="/index.html">
          <img src="./assets/images/home.png"><span class="nav-label">Home</span>
        </a>
      </div>

      <div class="navitem">
        <a selected href="/maths.html">
          <img src="./assets/images/games.png"><span class="nav-label">Games</span>
        </a>
      </div>

      <div class="navitem">
        <a href="/apps.html">
          <img src="./assets/images/apps.png"><span class="nav-label">Apps</span>
        </a>
      </div>

      <div class="navitem">
        <a href="/emulator.html">
          <img src="./assets/images/emulator.png"><span class="nav-label">Emulator</span>
        </a>
      </div>

      <div class="navitem">
        <a href="/search.html">
          <img src="./assets/images/search.png"><span class="nav-label">Search</span>
        </a>
      </div>
    </div>
  </nav>

  <div class="gamecontainer">

    <iframe
      allowfullscreen
      frameborder="0"
      id="frame"
      referrerpolicy="no-referrer"
      style="width:100vw;height:100vh;border:0;display:block;">
    </iframe>

    <div id="gameInfo">
      <div class="gameHeader">
        <img id="gameImage" alt="icon" />
        <h3 id="gameTitle"></h3>
      </div>
      <p id="gameDescription"></p>

      <div id="menubtns">

        <!-- Back Button -->
        <a href="./maths.html">
          <button onclick="window.location.href = '/'">
            <i class="fas fa-arrow-left"></i>
          </button>
        </a>

        <!-- Fullscreen Button -->
        <button onclick="document.getElementById('frame').requestFullscreen()">
          <i class="fas fa-expand"></i>
        </button>

        <!--Open in New Tab Button -->
        <button onclick="openInNewTab()">
          <i class="fas fa-external-link-alt"></i>
        </button>

        <!-- Favorite Button -->
        <button onclick="favorite()">
          <i class="favorited far fa-star"></i>
        </button>

      </div>
    </div>
  </div>

  <script src="./js/index.js"></script>
  <script src="./assets/data/games.js"></script>
  <script src="./assets/data/apps.js"></script>
  <script src="./js/load.js"></script>
  <script src="./js/constellations.js"></script>

  <!-- âœ… NEW SCRIPT -->
  <script>
    function openInNewTab() {
      const frame = document.getElementById("frame");
      const url = frame.src;

      if (url) {
        window.open(url, "_blank");
      } else {
        alert("No game loaded yet.");
      }
    }
  </script>

</body>
</html>

